<!DOCTYPE html>
<html>
<title>CryptoStore - Carrinho</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300&display=swap" rel="stylesheet">
<link rel="https://www.flaticon.com/" title="Flaticon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
.w3-sidebar a {font-family: "Roboto", sans-serif}

  div,a,body,h1,h2,h3,h4,h5,h6,.w3-wide,#w3-content {font-family: "Nunito", sans-serif;text-decoration: none;}
  div:hover,a:hover,body:hover,h1:hover,h2:hover,h3:hover,h4:hover,h5:hover,h6:hover,.w3-wide:hover,#w3-content:hover {text-decoration: none;color: white;}
  </style>
</style>
<body class="w3-content" style="max-width:1600px; background-color: #151515;color: white;">

  <nav class="w3-sidebar w3-bar-block w3-black w3-collapse w3-top" style="z-index:3; width:250px" id="mySidebar">
    <div class="w3-container w3-display-container w3-padding-16">
      <i onclick="w3_close()" class="fa fa-remove w3-hide-large w3-button w3-display-topright"></i>
      <a href="/" class="w3-xlarge w3-button">Crypto$tore<img src="https://thumbs.gfycat.com/IllSharpCod.webp" width="50"/>
    </div>
    {% include '_menssagem.html'%}
    <div class="w3-padding-64 w3-large w3-text-grey" style="font-weight:bold; background-color: black;">
      <a onclick="myAccFunc()" href="javascript:void(0)" class="w3-button w3-block w3-black w3-left-align"  id="myBtn">
        Departamentos <i class="fa fa-caret-down"></i>
      </a>

      <div id="demoAcc" class="w3-bar-block w3-hide w3-text-white w3-padding-large w3-medium" style="background-color: #1C1C1C;">
        {% for categoria in categorias %}
        <a href="{{url_for('obter_categoria', id=categoria.id)}}" class="w3-bar-item w3-button">{{categoria.name}}</a>
        {% endfor %}  
      </div>
    </div>
    <a href="#footer" class="w3-bar-item w3-button w3-padding" style="position: absolute; bottom: 38px;">Contato</a> 
    <a href="javascript:void(0)" class="w3-bar-item w3-button w3-padding" style="position: absolute; bottom: 0px;" onclick="document.getElementById('newsletter').style.display='block'">Notícias</a>
  </nav>

<header class="w3-bar w3-top w3-hide-large w3-black w3-xlarge">
  <div class="w3-bar-item w3-padding-24 w3-wide">Crypto$tore</div>
  <a href="javascript:void(0)" class="w3-bar-item w3-button w3-padding-24 w3-right" onclick="w3_open()"><i class="fa fa-bars"></i></a>
</header>

<div class="w3-overlay w3-hide-large" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<div class="w3-main" style="margin-left:250px">

  <div class="w3-hide-large" style="margin-top:83px"></div>
  
  <header class="w3-container w3-xlarge w3-collapse" style="background-color: black;color: white;">
    <p class="w3-center" style="margin:24px 0px 24px 0px;">
        {% if 'email' not in session %}
        <a href="/login" class="w3-bar-item w3-button" style="width: 17%;">Cadastre-se/Login <i class="fa fa-user-circle w3-margin-right"></i></a>
      {% else %}
      <a href="/logout" class="w3-bar-item w3-button" style="width: 15%;">Logout  <i class="fa fa-sign-out"></i></a>
      {% endif %}
      <a href="#" class="w3-bar-item w3-button" style="width: 15%; height: 100%;">Pedidos <i class="fa fa-truck fa-flip-horizontal"></i></a>
      
      <input type="text" placeholder="Pesquisar..." class="w3-right" style="margin-top:5px;">
      <a href="#" class="w3-bar-item w3-button w3-right" style="margin-right:10px"><i class="fa fa-search"></i></a>
    </p>
  </header>

  <h2 style="margin: 50px 0px 0px 120px;">Meu Carrinho</h2>
  <div style="margin: 50px 100px 50px 100px; border: solid; border-color: gold;border-radius: 20px; padding:30px; background-color: black;">
    <table style="margin:0px;font-size: 150%">
        <thead>
            <th></th>            
            <th>Produto</th>
            <th>Nome</th>
            <th>Valor</th>
            <th>Quantidade</th>
            <th>Total</th>
            
        </thead>
        <tbody>
            {% for carin in carrinho %}
            <tr>
                <td><a href="{{url_for('deleteitem', id = carin.id)}}"style="padding:50px 0px;" class="fa fa-trash"></a></td>                
                <td style="padding:20px 25px;"><img src="{{url_for('static', filename='images/' + carin.addproduto.imagem_1)}}"  height="50px" width="50px" ></td>
                <td style="padding:20px 25px;">{{carin.addproduto.name}}</td>
                <td style="padding:20px 25px;">R${{carin.addproduto.preco}}</td>
                <td style="padding:20px 10px;padding-left: 40px;width: 20%;">
                  <form action="{{url_for('updateitem', id=carin.id)}}" method="post">
                    <input style="width:40%;background-color: black;color:white;border:solid 2px;border-radius:10px;font-size:22px;text-align:left;" type="number" name="quantidade" id="" value="{{carin.quantidade}}" min="1" max="{{carin.addproduto.stock}}">
                    <button type="submit" style="background-color:black;color:white;border:none;"class="fa fa-refresh"></button>
                  </form>
                </td>
                {% set subtotal = carin.quantidade|int * carin.addproduto.preco|float %}    
                <td>R${{"%0.2f"|format(subtotal|float)}}</td>        
            </tr>
            {% endfor %}
        </tbody>       

    </table>
    <h2 style="padding-left:80%">Total: {{grande_tota}}</h2>
    <h3 style="display:inline-block;"><a href="/pagamento" class="w3-button w3-black" style="border:solid;border-color:gold;border-radius: 10px;font-size: 20px;margin-top: 30px;padding:10px 50px;margin-right: 500px;" type="submit">Continuar comprando</a></h3>
    <h3 style="display:inline-block;"><a href="/pagamento" class="w3-button w3-black" style="border:solid;border-color:gold;border-radius: 10px;font-size: 20px;margin-top: 30px;padding:10px 50px" type="submit">Finalizar compras</a></h3>
  </div>
  
  <footer class="w3-padding-64 w3-small w3-center" style="background-color:#1C1C1C;color: white;" id="footer">
    <div class="w3-row-padding">
      <div class="w3-col s4">
        <h4>Contato</h4>
        <p>Duvidas? Entre em contato!</p>
        <form action="/action_page.php" target="_blank">
          <p><input class="w3-input w3-border" type="text" placeholder="Nome" name="Name" required></p>
          <p><input class="w3-input w3-border" type="text" placeholder="Email" name="Email" required></p>
          <p><input class="w3-input w3-border" type="text" placeholder="Assunto" name="Subject" required></p>
          <p><input class="w3-input w3-border" type="text" placeholder="Mensagem" name="Message" required></p>
          <button   class="w3-button w3-block w3-white" onclick="alert('Mensagem enviada!')">Enviar</button>
        </form>
      </div>

      <div class="w3-col s4">
        <h4>Sobre</h4>
        <p><a href="/sobrenos">Sobre nós</a></p>
        <p><a href="/entrega">Entregas</a></p>
      </div>

      <div class="w3-col s4 w3-justify">
        <h4>Loja</h4>
        <p><i class="fa fa-fw fa-map-marker"></i>Arcom LABS</p>
        <p><i class="fa fa-fw fa-phone"></i> +55 34 99842-0974</p>
        <p><i class="fa fa-fw fa-envelope"></i> cryptostore@gmail.com</p>
        <h4>Nós aceitamos</h4>
        <p><i class="fa fa-fw fa-cc-amex"></i> Cripto Moedas</p>
        <p><i class="fa fa-fw fa-credit-card"></i> Cartão de Crédito</p> 
        <br>
      </div>
    </div>
  </footer>

</div>

<div id="newsletter" class="w3-modal">
  <div class="w3-modal-content w3-animate-zoom" style="padding:32px;background-color: black; border: solid;border-radius: 10px;">
    <div class="w3-container w3-black w3-center">
      <i onclick="document.getElementById('newsletter').style.display='none'" class="fa fa-remove w3-right w3-button w3-transparent w3-xxlarge"></i>
      <h2 class="w3-wide" style="color: white;">INSCREVA-SE</h2>
      <p style="color: white;">Inscreva-se para receber notícias sobre novidades e promoções!</p>
      <p><input class="w3-input w3-border" type="text" placeholder="Seu e-mail" style="background-color: #151515;color: white;"></p>
      <button type="button" class="w3-button w3-padding-large w3-red w3-margin-bottom" onclick="document.getElementById('newsletter').style.display='none'">Inscrever</button>
    </div>
  </div>
</div>
<script>
function myAccFunc() {
  var x = document.getElementById("demoAcc");
  if (x.className.indexOf("w3-show") == -1) {
    x.className += " w3-show";
  } else {
    x.className = x.className.replace(" w3-show", "");
  }
}

document.getElementById("myBtn").click();


function w3_open() {
  document.getElementById("mySidebar").style.display = "block";
  document.getElementById("myOverlay").style.display = "block";
}
 
function w3_close() {
  document.getElementById("mySidebar").style.display = "none";
  document.getElementById("myOverlay").style.display = "none";
}
</script>

</body>
</html>
